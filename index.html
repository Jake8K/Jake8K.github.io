<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Strava API Helper</title>

    <!-- Bootstrap Core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="css/scrolling-nav.css" rel="stylesheet">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    <script src= "stravaCode.js" ></script>

</head>

<!-- The #page-top ID is part of the scrolling feature - the data-spy and data-target are part of the built-in Bootstrap scrollspy function -->

<body id="page-top" data-spy="scroll" data-target=".navbar-fixed-top">

    <!-- Navigation -->
    <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
        <div class="container">
            <div class="navbar-header page-scroll">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand page-scroll" href="#page-top">Strava's V3 API</a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse navbar-ex1-collapse">
                <ul class="nav navbar-nav">
                    <!-- Hidden li included to remove active class from about link when scrolled up past about section -->
                    <li class="hidden">
                        <a class="page-scroll" href="#page-top"></a>
                    </li>
                    <li>
                        <a class="page-scroll" href="#basics">Basics</a> <!-- about -->
                    </li>
                    <li>
                        <a class="page-scroll" href="#GETnPOST">JSON</a> <!-- contact -->
                    </li>
                    <li>
                        <a class="page-scroll" href="#authorization">Authorize</a> <!-- services? -->
                    </li>
                    <li>
                        <a class="page-scroll" href="#request">Request</a>
                    </li>
                    <li>
                        <a class="page-scroll" href="#response">Response</a>
                    </li>
                    <li>
                        <a class="page-scroll" href="#connections">Go Deeper</a>
                    </li>
                    <li>
                        <a class="page-scroll" href="#repeat">Deeper</a>
                    </li>
                    <li>
                        <a class="page-scroll" href="#voile">Voile!</a>
                    </li>
                    <li>
                        <a class="page-scroll" href="#results">Results</a>
                    </li>
                    <li>
                        <a class="page-scroll" href="#extra">Learn More</a>
                    </li>
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container -->
    </nav>

    <!-- /\/\/\/\/\/\/\/\/\/\/\/\/\ Intro Section /\/\/\/\/\/\/\/\/\/\/\/\/\ -->
    <section id="intro" class="intro-section">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <h1>The Strava (V3) API</h1>
                    <h5><a href=https://strava.github.io/api/>Strava's API Documentation</a></h5>
                    </br>
                    <h3>What's a Strava and why code for it?</h3>
                    <p>
                      Strava is perhaps the most popular athlete application today. Athletes in all walks of life and in all platform ecosystems have access to it. Whether you’re a triathlete or a swimmer, cycler, or runner. Whether you’re a Garmin, Suunto, Polar, or even just a casual runner with a phone. Strava can import your workout data or track it for you (fortunately for most, Garmin and Strava have a close relationship these days). It makes it easy to track your progress and compete with friends, even join groups and clubs of people in your sport(s).  If you have a premium account, then you have access to even more data metrics, including proprietary Strava metrics like their infamous “suffer score”.
                    </p>
                    <p>
                      What if you want to make an Application that uses that data, or if you simply want a way to read and interpret certain Strava metrics for your own personal pleasures? Then you’re going to head over to their API documentation to figure out how to write your JavaScript code for that.
                    </p>
                    <p>
                      Strava’s API documentation is a great resource, especially if your application relies on jQuery. Unfortunately it is a little vague when it comes to Ajax calls. It also doesn’t explain the methods of authorizing a Strava user and retrieving that user’s access token. Additionally, because of the constraints imposed by CORS (Cross Origin Resource Sharing), the browser is prevented from making an Ajax request to a server on a different domain. As a result, we won’t be able to demonstrate the Authorization token exchange, but we’ll go over the basic code anyways. Unfortunately that also means that we’re stuck with my lazy account for the duration of this Strava API coding experience. We also won’t go into POST requests for the same reason, but they’re fairly similar to GETs.
                    </p>
                  </br>
                  <p>
                    Before we get started, the first thing you’re going to want to do is login to strava and get yourself a <a href="https://www.strava.com/settings/api">developer account</a>. Strava will then provide you with your app's client id and client secret. This should go without saying, but that secret is for your eyes only. You will also be awarded your first user access token (for yourself). Make sure to keep your client id, user id, and access token available for later.
                  </p>
                    <!-- <p><strong>Usage Instructions:</strong> Make sure to include the <code>scrolling-nav.js</code>,
                      <code>jquery.easing.min.js</code>, and <code>scrolling-nav.css</code> files. To make a link smooth
                      scroll to another section on the page, give the link the <code>.page-scroll</code> class and set the
                      link target to a corresponding ID on the page.</p> -->
                    <!-- <input class="btn btn-default page-scroll" type="submit" id="userAuth" value="Authorize Strava"><br/> -->
                  </br>
                    <a class="btn btn-default page-scroll" href="#basics">Lets get this party started!</a>
                </div>
            </div>
        </div>
    </section>

    <!-- /\/\/\/\/\/\/\/\/\/\/\/\/\ About Section /\/\/\/\/\/\/\/\/\/\/\/\/\ -->
    <section id="basics" class="basics-section">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                  <h1>The Basics</h1>
                  </br>
                  <h3>What's an API?</h3>
                  <p class="leftText">
                    An <b>application program interface (API)</b> is a set of routines, protocols, and tools for building software applications. An API specifies how software components should interact. Additionally, APIs are used when programming graphical user interface (GUI) components.
                    Read more about an <a href="https://en.wikipedia.org/wiki/Application_programming_interface">API</a>
                  </p>
                  <h3>What is Ajax?</h3>
                  <p class="leftText">
                    AJAX stands for <b>Asynchronous JavaScript and XML</b>. It’s basically the use of the XMLHttpRequest object to communicate with server-side scripts. It can send as well as receive information in a variety of formats, including JSON, XML, HTML, and even text files. We’re going to be using JSON objects, the most commonly implemented format.
                    Read more about <a href="https://en.wikipedia.org/wiki/Ajax_(programming)">AJAX</a>
                  </p>
                  <h3>What's a Request?</h3>
                  <p>The Strava API allow GET, POST, PUT, HEAD, and DELETE requests.</p>
                  <div class="leftText">
                    <li><b>GET Request Method:</b></br>
                      <p class="tab"> The GET request method requests a representation of the specified resource. GET requests retrieve data and (should) have no other effect. The URL’s query sting  (of the GET request) can include parameters to narrow down or define the element of interest.</p>
                    </li>
                    <li><b>POST Request Method:</b>
                      <p class="tab">The POST request method requests that a server accept data enclosed in the body of the request message. Oftentimes this is a form or a file.  Usually this protocol is employed to store data on that server, whether it’s a Facebook post or a workout upload. As part of the POST request an arbitrary amount of data can be sent to the server in the body of the request message.</p>
                      </li>
                    <li><b>HEAD Request Method:</b>
                      <p class="tab">The HEAD method asks for a response identical to that of a GET request, but without the response body. This is great for mining metadata.</p>
                    </li>
                    <li><b>PUT Request Method:</b>
                      <p class="tab">The PUT method requests that the enclosed entity be stored under the supplied URI. If the URI refers to an already existing resource, it is modified; if the URI does not point to an existing resource, then the server can create the resource with that URI.</p>
                    </li>
                    <li><b>DELETE Request Method:</b>
                      <p class="tab">Deletes the specified resource.</p>
                    </li>
                  </div>
                  <p>Read more about <a hre="https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol#Request_methods">HTTP requests</a></p>
                  <p>Strava’s request protocols employ HTTPS (as opposed to HTTP), which stands for Hyper Text Transfer Protocol Secure. Meaning that unlike http, all communications between the client (browser) and server is encrypted.</br>
                      We’re going to focus on GET requests because they’re the only ones we can test out right now.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- /\/\/\/\/\/\/\/\/\/\/\/\/\ GETnPOST Section /\/\/\/\/\/\/\/\/\/\/\/\/\ -->
    <section id="GETnPOST" class="GETnPOST-section">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                  <h1>application/JSON</h1>
                  </br>
                  <p>
                    Lets back up a little and go over JSON objects briefly, in case you're not familiar with them yet.
                  </p>
                  <div class="leftText">
                    <p>Formally:</br>“JSON (<b>JavaScript Object Notation</b>) is a lightweight data-interchange format. It is easy for humans to read and write. It is easy for machines to parse and generate. It is based on a subset of the JavaScript Programming Language, Standard ECMA-262 3rd Edition - December 1999." – <a href= http://www.json.org>JSON.org</a></p>
                    <p>So, JSON objects are commonly used to pass information around especially in web applications. They're great because we can box up a lot of information and even include attributes of the information. They really can hold a lot of data (for an object) as we’ll see. The developer simply needs to create the object they want to send and pass it to the JSON built in function stringify. So JavaScript object foo is converted to JSON by JSON.stringify(foo). Then, on the receiving end we simply parse the string using JSON’s parse method and assign it to a new JavaScript variable, as in <code>var baz = JSON.parse(data)</code>. We’ll go over examples so you can understand why I used the generic data there to represent the response. Start your own research on application/JSON to learn more, <a href="https://en.wikipedia.org/wiki/JSON">Wikipedia</a> is great place to start. (as well as the official <a href= http://www.json.org>JSON.org</a> page, above).</p>
                  </div>
                  <p>For example, here is a Strava athlete's public data represented as a JSON object (left) and JavaScript object (right). Notice the striking similarity. Basically the only difference is the quotation marks around all the strings (hence JSON.stringify…).</p>
                </div>
                <div>
                  <table>
                  	<tr>
                  		<td><iframe width="100%" height="300" src="//jsfiddle.net/jikarcz/73emx9xh/embedded/js/" allowfullscreen="allowfullscreen" frameborder="0"></iframe></td>
                  		<td><iframe width="100%" height="300" src="//jsfiddle.net/jikarcz/cdwgLnna/embedded/js/" allowfullscreen="allowfullscreen" frameborder="0"></iframe></td>
                  	</tr>
                  </table>
                </div>
            </div>
        </div>
    </section>

    <!-- /\/\/\/\/\/\/\/\/\/\/\/\/\ authorization Section /\/\/\/\/\/\/\/\/\/\/\/\/\ -->
    <section id="authorization" class="authorization-section">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <h1 class="crammed">Authorization</h1>
                    <p>
                      I know this part is dull and we can't work out any examples (unless you're following along and
                      writing your own code), but this is barely a bleep in the Strava documentation, so pull out your client id and pay attention.
                    </p>
                    <table width="100%" height="600">
                      <tr>
                        <td width="50%">
                          <iframe width="100%" height="700" src="//jsfiddle.net/jikarcz/szvs2smo/embedded/js,html,result/" allowfullscreen="allowfullscreen" frameborder="0"></iframe>
                          <!-- <script async src="//jsfiddle.net/jikarcz/szvs2smo/embed/js,html,result/"></script> -->
                        </td>
                        <td>
                          <div class="fiddleDescriptor">
                            <p>
                              <h3>What the code on the left is saying, from the start is: </h3>
                              First, <code>myAppID</code> is your app ID (also known as client id) - this is the number given to you by
                              Strava when you set up your developer account and registered your app </br>
                              Next, your user ID for Strava. This is optinal since ideally your app will be using your users'
                              user IDs here. For testing purposes though, it's easy to use your account as a test case</br>
                              Third, <code>myAccountToken</code> is the access token. This is a long string of letters and numbers.
                              Strava will give you one to test with your app for your profile when you register your developer account.
                              This section will <code><b>authorize</b></code> is an object prototype for the sort of access token you want
                              to use. You don't have a lot of options here. <code>client_id</code> is provided to you by Strava for your
                              application, as we said. It's <code>myAppID</code>.Your <code>redirect_uri</code> is where you want the access token
                              to be sent so you can retrieve it from thequery string and save it. <code>scope</code> refers to what you want to
                              be able to do with the user's information. The authorization-section request you generate will refelct this.
                              <code>public</code> means that you just want access to their public information(no real permissios here)
                              <code>write</code> means that you want to POST to their account. This can be pictures, activity, whatever.
                              <code>view_private</code> means that you want access to all the data in their account, but you won't POST anything.
                              <code>view_private,write</code> means that you want full reading and writing privilages to their account. You can do anything.
                              <!-- <ul>
                                <li><code>public</code> means that you just want access to their public information(no real permissios here)</li>
                                <li><code>write</code> means that you want to POST to their account. This can be pictures, activity, whatever.</li>
                                <li><code>view_private</code> means that you want access to all the data in their account, but you won't POST anything.</li>
                                <li><code>view_private,write</code> means that you want full reading and writing privilages to their account. You can do anything.</li>
                              </ul> -->
                              Now, since POSTS require CORS access, as I mentioned earlier, we're only going to be requesting full read privilages.</br>
                              As with <code>authorize</code>, <code>athlete</code> represents our primary user and the information we wish to store.
                              Upon successful authorization of your app, Strava servers will return a JSON object with the user's information.
                              We'll store that here. </br>
                              <b>At last</b>, we're going to make the request. We bind this to our "activation" button in html and send an asynchronous
                              request to <code>https://www.strava.com/oauth/authorize</code> with all of our variables from the authorization object we
                              created above. Notice how we used them to build a url address with GET request variables in the line starting with
                              <code>authReq.open...</code></br> If the request was successful, we get a JSON object containing our primary user's data.
                              We parse that JSON object into <code>authResponse</code> and use that to create an instance of an athlete named <code>mainUser</code>.
                              We pass the variables from the JSON athlete object back to our ahtlete constructor to take care of that for us.
                            </p>
                          </div>
                        </td>
                      </tr>
                    </table>
                    <p></br>
                      So what's the purpose of all of this code? Simple. You're going to send Strava something that looks like this:
                      <code>http://www.strava.com/oauth/authorize?client_id=8080&response_type=code&redirect_uri=http://localhost/exchange_token&approval_prompt=force&scope=write</code>
                      </br>and if you're successfule, they're going to send you something that looks like this:
                      <code>http://localhost/exchange_token?state=&code=c498932e64136c8991a3fb31e3d1dfdf2f859357</code>
                      We're after this part, <code>c498932e64136c8991a3fb31e3d1dfdf2f859357</code>. The authorization token. It will be the first Element of the JSON object you'll receive, the second is the main user's athlete{..} object.</br></br>
                      I know thats a lot to process, but combine my example with the information provided by Strava and you should be in good shape.
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- /\/\/\/\/\/\/\/\/\/\/\/\/\ request Section /\/\/\/\/\/\/\/\/\/\/\/\/\ -->
    <section id="request" class="request-section">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <h1>Make a Request To The API</h1>
                    <h3>Building our GET request string</h3>
                    <p>
                      Let's go over a GET request (since I breezed by the one in the authentication section).
                    </p>
                    <h3>Sending our GET request</h3>
                </div>
            </div>
        </div>
    </section>
    <!-- /\/\/\/\/\/\/\/\/\/\/\/\/\ response Section /\/\/\/\/\/\/\/\/\/\/\/\/\ -->
    <section id="response" class="response-section">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <h1>Get a Response From The API</h1>
                    </br>
                    <h3>Opening our JSON object</h3>
                    <h3>Extracting what we want</h3>
                </div>
            </div>
        </div>
    </section>
    <!-- /\/\/\/\/\/\/\/\/\/\/\/\/\ connections Section /\/\/\/\/\/\/\/\/\/\/\/\/\ -->
    <section id="connections" class="connections-section">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <h1>Use Data From the Response in a Request</h1>
                    </br>
                    <h3>Apply logic to the response</h3>
                    <h3>Use the response data in a request</h3>
                </div>
            </div>
        </div>
    </section>
    <!-- /\/\/\/\/\/\/\/\/\/\/\/\/\ repeat Section /\/\/\/\/\/\/\/\/\/\/\/\/\ -->
    <section id="repeat" class="repeat-section">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <h1>Let's Try To Match With Like-Minded Athletes!</h1>
                    </br>
                    <h3>Continue using response object data to find other Strava athletes that frequent our routes!</h3>
                    <p>
                      Since we've already learned how to make query strings and parse responses for the variables we want
                      lets assume our programming logic built the next few query strings.
                    </p>
                </div>
            </div>
        </div>
    </section>
    <!-- /\/\/\/\/\/\/\/\/\/\/\/\/\ voile Section /\/\/\/\/\/\/\/\/\/\/\/\/\ -->
    <section id="voile" class="voile-section">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <h1>We got it!</h1>
                </div>
            </div>
        </div>
    </section>
    <!-- /\/\/\/\/\/\/\/\/\/\/\/\/\ results Section /\/\/\/\/\/\/\/\/\/\/\/\/\ -->
    <section id="results" class="results-section">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <h1>Lets see our results!</h1>
                    <h3>match1</h3>
                      <li>Name: </li>
                      <li>Username: </li>
                      <li>Profile picture: </li>
                      <li>Gender: </li>
                      <li>City: </li>
                      <li>State: </li>
                      <li>Premium Membership: </li>
                </div>
            </div>
        </div>
    </section>
    <!-- /\/\/\/\/\/\/\/\/\/\/\/\/\ extra Section /\/\/\/\/\/\/\/\/\/\/\/\/\ -->
    <section id="extra" class="extra-section">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <h1>Dive Deeper</h1>
                    </br>
                    <h4>For More information, check out these great resources!</h4>
                    </br>
                    <p><a href="https://www.strava.com/dashboard">Strava's Homepage (well, your Strava profile)</a></p>
                    <p><a href="https://strava.github.io/api/">Strava's API Documentation</a></p>
                    <p><a href="https://www.reddit.com/r/Strava/comments/46yv53/how_to_get_started_with_strava_api/">Strava API's Reddit</a></p>
                    <p><a href="https://groups.google.com/forum/m/#!forum/strava-api">Strava API's Google Group</a></p>
                    <p><a href="https://curl.haxx.se">The curl command line tool and library (for transferring data with URLs)</a></p>
                </div>
            </div>
        </div>
    </section>
    <!-- -{{{{{{{{{{{{{{{{{{{{{{{{{{ jQuery }}}}}}}}}}}}}}}}}}}}}}}}}}}}}}- -->
    <script src="js/jquery.js"></script>

    <!-- -{{{{{{{{{{{{{{{{{ Bootstrap Core JavaScript }}}}}}}}}}}}}}}}}}}}- -->
    <script src="js/bootstrap.min.js"></script>

    <!-- -{{{{{{{{{{{{{{{{{ Scrolling Nav JavaScript }}}}}}}}}}}}}}}}}}}}- -->
    <script src="js/jquery.easing.min.js"></script>
    <script src="js/scrolling-nav.js"></script>

</body>

</html>
